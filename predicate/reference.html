<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="Christopher Alfeld">
<title>Predicate Reference</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Predicate Reference</h1>
<div class="details">
<span id="author" class="author">Christopher Alfeld</span><br>
<span id="email" class="email"><a href="mailto:calfeld@qualys.com">calfeld@qualys.com</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_values">Values</a></li>
<li><a href="#_results">Results</a></li>
<li><a href="#_s_expressions">S-Expressions</a></li>
<li><a href="#_functions">Functions</a>
<ul class="sectlevel2">
<li><a href="#_arguments">Arguments</a></li>
<li><a href="#_categories">Categories</a></li>
</ul>
</li>
<li><a href="#_reference">Reference</a>
<ul class="sectlevel2">
<li><a href="#s.boolean">Boolean</a></li>
<li><a href="#_list">List</a></li>
<li><a href="#_string">String</a></li>
<li><a href="#s.filters">Filters</a></li>
<li><a href="#p.flowcontrol">Flow Control</a></li>
<li><a href="#s.predicates">Predicates</a></li>
<li><a href="#_math">Math</a></li>
<li><a href="#_phase">Phase</a></li>
<li><a href="#s.ironbee">IronBee</a></li>
<li><a href="#s.development">Development</a></li>
<li><a href="#s.templates">Templates</a></li>
</ul>
</li>
<li><a href="#_index">Index</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>For an overview and discussion of the system, see <a href="introduction.html">introduction</a>.  For a tutorial for writing rules, see <a href="guide.html">guide</a>.  For details on the modules, see <a href="modules.html">modules</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document is the reference manual for Predicate.  It contains precise descriptions of every aspect and function in the Predicate language.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_values">Values</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The value system of Predicate closely matches that of IronBee.  Values are named and typed.  Names are allowed to be any string, although, in practice, they tend to be short and human readable.</p>
</div>
<div class="paragraph">
<p>There is a special value, <em>null</em>, written as <code>:</code>.  The null value has no name and no type.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
With the exception of null and lists, values are immutable.  See <a href="#_results">Results</a> below.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The types are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">String</dt>
<dd>
<p>Strings can be of any length and can contain unprintable and null characters.</p>
</dd>
<dt class="hdlist1">Number</dt>
<dd>
<p>Numbers are signed 64 bit integers.</p>
</dd>
<dt class="hdlist1">Float</dt>
<dd>
<p>Floating points are long double precision floats.</p>
</dd>
<dt class="hdlist1">Lists</dt>
<dd>
<p>Lists are lists of values.</p>
</dd>
<dt class="hdlist1">Special</dt>
<dd>
<p>There are a few rare exceptions.  See <a href="#p.ask"><code>ask</code></a>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The null value and the empty list are treated as false.  All other values are treated as true.</p>
</div>
<div class="paragraph">
<p>At present, the canonical true value is the empty string, <code>''</code>.  However, this convention should not be relied upon.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_results">Results</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The result of any predicate expression is a value and a finished flag.  While the expression is not finished, certain changes to the value are allowed.  Once an expression is finished, its value is fixed.</p>
</div>
<div class="paragraph">
<p>Values of unfinished expressions are only allowed to change in certain specific ways.  All expressions begin with the null value, <code>:</code>.  The allowed changes are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Null to non-null.</p>
</li>
<li>
<p>Appending to a list value.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
An expression that takes a non-null non-list value must be finished.  Also note that nodes may not change to the null value, only away from it.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_s_expressions">S-Expressions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The underlying syntax of Predicate is that of an s-expression (sexpr).</p>
</div>
<div class="paragraph">
<p>The grammar of a Predicate expression is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>expression      := call | literal
call            := ' '* '(' name ( ' '+ expression )* ')'
name            := first_name_char name_char*
first_name_char := [A-Za-z_]
name_char       := first_name_char | [.-]
literal         := null | named_literal | literal_value
null            := ':'
named_literal   := literal_name ':' literal_value
literal_name    := string | name
literal_value   := list | string | float | integer
string          := '\'' (/[^'\\]/ | '\\\\' | '\\'')* '\''
integer         := '-'? [0-9]+
float           := '-'? [0-9]+ ('.' [0-9]+)?
list            := '[' ( literal ( ' '+ literal )* )? ']'</pre>
</div>
</div>
<div class="paragraph">
<p>Note that many contexts, e.g., use in rules, requires the top expression to be a call.</p>
</div>
<div class="paragraph">
<p>Informally:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Function Call</dt>
<dd>
<p><code>(<em>name</em> <em>arg1</em> <em>arg2</em> &#8230;&#8203;)</code>.  Call function <em>name</em> with given arguments.</p>
</dd>
<dt class="hdlist1">Null</dt>
<dd>
<p><code>:</code></p>
</dd>
<dt class="hdlist1">Named Literal</dt>
<dd>
<p><code>name:value</code>.  Names can be written the same as strings, beginning and ending with <code>'</code>.  If the name satisfies the rules of function names, the <code>'</code>s can be omitted.</p>
</dd>
<dt class="hdlist1">Unnamed Literal</dt>
<dd>
<p><code>value</code></p>
</dd>
<dt class="hdlist1">String Value</dt>
<dd>
<p>E.g., <code>'hello world'</code>.  Single quotes can be embedded via <code>\'</code> and backslashes via <code>\\</code>.  More generally, <code>\x</code> is equivalent to <code>x</code> for any <code>x</code>.</p>
</dd>
<dt class="hdlist1">Number Value</dt>
<dd>
<p>E.g., <code>6</code>, <code>-13</code>.</p>
</dd>
<dt class="hdlist1">Float Value</dt>
<dd>
<p>E.g., <code>3.141</code>, <code>-7.0</code>.  The presence of a period distinguishes floats from numbers.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>List Values: <code>[value1 value2 &#8230;&#8203;]</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functions">Functions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_arguments">Arguments</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Static</dt>
<dd>
<p>Static arguments must be literals.  Typically, a static argument requires some amount of preprocessing before it can be used, and this preprocessing should not be done at runtime.  E.g., a regular expression.</p>
</dd>
<dt class="hdlist1">Dynamic</dt>
<dd>
<p>Dynamic arguments are any that are not static.  All dynamic arguments may be literals.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_categories">Categories</h3>
<div class="paragraph">
<p>There are several categories of functions.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Primary</dt>
<dd>
<p>A primary function has a single "primary" argument that is always the last argument.  The function can be viewed as performing some sort of operation or transformation on the primary argument.  There may be additional "secondary" arguments that can be viewed as configuration of that operation.  A Primary function will do nothing (have a result of <code>:</code>) until all secondary arguments are finished.</p>
</dd>
<dt class="hdlist1">Map</dt>
<dd>
<p>A Map function is a Primary function that has a list primary argument and apply a subfunction to every subvalue of that list.  The result of a map function is the results of that subfunction.  If the primary argument is an actual list, <code>[value1, value2, &#8230;&#8203;]</code>, the then result will be the subfunction <code>f</code> applied to each value: <code>[f(value1) f(value2) &#8230;&#8203;]</code>.  If the primary argument is a null, the result will be a null.  If the primary argument is not a list, the result will be the subfunction applied to the argument.</p>
</dd>
<dt class="hdlist1">Filter</dt>
<dd>
<p>A Filter function is similar to Map, but instead of applying a subfunction to each subvalue, it chooses a subset based.  That is, it applies a subfunction to each subvalue and includes the subvalue in the result iff the subfunction returns true.  If the primary argument is not a list, the result be the primary argument iff the subfunction is true when applied to the primary argument.</p>
</dd>
<dt class="hdlist1">Selector</dt>
<dd>
<p>A Selector function is similar to Filter, but instead of returning a list of passing subvalues, it returns the first passing subvalue.</p>
</dd>
<dt class="hdlist1">Abelian</dt>
<dd>
<p>An Abelian function behaves the same even if its argument are reordered.  This order independence can provide higher performance by merging calls that differ only in order.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reference">Reference</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Every predicate function is described below.  Possible attributes are:</p>
</div>
<div class="paragraph">
<p><strong>Result</strong>: The result of the function.</p>
</div>
<div class="paragraph">
<p><strong>Finished</strong>: Conditions under which the function is finished.</p>
</div>
<div class="paragraph">
<p><strong>Category</strong>: The category of the function.  Note that a category can imply many aspects of the function.  Those aspects will not be repeated in the specific function description.</p>
</div>
<div class="paragraph">
<p><strong>See</strong>: Other related functions.</p>
</div>
<div class="paragraph">
<p><strong>Arguments</strong>: Detailed information about arguments.  When Arguments is omitted, it can be assumed that all arguments are dynamic.</p>
</div>
<div class="paragraph">
<p><strong>Transformations</strong>: How the function will transform.  When Transformations is omitted, the function may still transform according to its category.  Also, most function will transform if all of their arguments are literals.</p>
</div>
<div class="paragraph">
<p><strong>Warning</strong>: Warnings about dangerous or unintuitive behavior.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: Notes about behavior.</p>
</div>
<div class="paragraph">
<p><strong>Map</strong>: For map functions, the subfunction.</p>
</div>
<div class="paragraph">
<p><strong>Filter</strong>: For filter functions, the filter.</p>
</div>
<div class="paragraph">
<p><strong>Selector</strong>: For selector functions, the selector.</p>
</div>
<div class="paragraph">
<p><strong>Deprecated</strong>: Why to avoid using this function and when it is going away.</p>
</div>
<div class="sect2">
<h3 id="s.boolean">Boolean</h3>
<div class="paragraph">
<p>These functions provide boolean logic functionality.</p>
</div>
<div class="sect3">
<h4 id="p.true"><code>(true)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: N/A<br>
<strong>Finished</strong>: N/A</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Transformations</strong></dt>
<dd>
<p><code>(true) &#8594; ''</code></p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="p.false"><code>(false)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: N/A<br>
<strong>Finished</strong>: N/A</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Transformations</strong></dt>
<dd>
<p><code>(false) &#8594; :</code></p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="p.and"><code>(and &#8230;&#8203;) (andSC &#8230;&#8203;)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Abelian (<code>and</code> only)<br>
<strong>Result</strong>: True iff all arguments are true or there are no arguments.<br>
<strong>Finished</strong>: All arguments are true or all arguments are finished.<br>
<strong>Note</strong>: <code>andSC</code> differs from <code>and</code> in that it is not abelian and will only evaluate an argument once all previous arguments are true.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Transformations</strong></dt>
<dd>
<p><code>(and &#8230;&#8203; : &#8230;&#8203;) &#8594; :</code><br>
<code>(and &#8230;&#8203; x &#8230;&#8203;) &#8594; (and &#8230;&#8203; &#8230;&#8203;)</code> if <code>x</code> is true literal<br>
<code>(andSC &#8230;&#8203; : &#8230;&#8203;) &#8594; :</code><br>
<code>(andSC &#8230;&#8203; x &#8230;&#8203;) &#8594; (and &#8230;&#8203; &#8230;&#8203;)</code> if <code>x</code> is true literal.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="p.or"><code>(or &#8230;&#8203;)</code> <code>(orSC &#8230;&#8203;)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Abelian (<code>or</code> only)<br>
<strong>Result</strong>: True iff any argument is true and there are arguments.<br>
<strong>Finished</strong>: Any argument is true or all arguments are finished.<br>
<strong>Note</strong>: <code>orSC</code> differs from <code>or</code> in that it is not abelian and will only evaluate an argument once all previous arguments are false and finished.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Transformations</strong></dt>
<dd>
<p><code>(or &#8230;&#8203; x &#8230;&#8203;) &#8594; &apos;'</code> if <code>x</code> is true literal.<br>
<code>(or &#8230;&#8203; x &#8230;&#8203;) &#8594; (or &#8230;&#8203; &#8230;&#8203;)</code> if <code>x</code> is a false literal.<br>
<code>(orSC &#8230;&#8203; x &#8230;&#8203;) &#8594; ''</code> if <code>x</code> is true literal.<br>
<code>(orSC &#8230;&#8203; x &#8230;&#8203;) &#8594; (or &#8230;&#8203; &#8230;&#8203;)</code> if <code>x</code> is a false literal.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="p.not"><code>(not a)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: True iff <code>a</code> is false and finished.<br>
<strong>Finished</strong>: <code>a</code> is true or <code>a</code> is finished.<br>
<strong>Warning</strong>: The result will be false until <code>a</code> is finished, even if <code>a</code> is currently <code>:</code>.  This behavior is because, once the result becomes true it cannot return to false.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.if"><code>(if p t f)</code> <code>(if p t)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: <code>f</code> may be omitted, in which case it is treated as <code>:</code>.<br>
<strong>Result</strong>: <code>t</code> if <code>p</code> is true, <code>f</code> if <code>p</code> is false and finished, <code>:</code> otherwise.<br>
<strong>Finished</strong>: <code>t</code> is finished and <code>p</code> is true or <code>f</code> is finished and <code>p</code> is false and finished.<br>
<strong>Note</strong>: Interpreted as a short circuiting hint, e.g., "don&#8217;t evaluated <code>t</code> unless <code>p</code> is true".</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Transformations</strong></dt>
<dd>
<p><code>(if p t f) &#8594; t</code> if <code>p</code> is true literal.<br>
<code>(if : t f) &#8594; f</code>.<br>
<code>(if p t) &#8594; t</code> if <code>p</code> is true literal.<br>
<code>(if : t) &#8594; :</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_list">List</h3>
<div class="paragraph">
<p>These function provide for manipulations of list values.</p>
</div>
<div class="sect3">
<h4 id="p.setName"><code>(setName n v)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Map<br>
<strong>Map</strong>: <code>x:y &#8594; n:y</code><br>
<strong>Note</strong>: To set the name of a list, use <code>(first (setName n (list v)))</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.pushName"><code>(pushName v)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Map<br>
<strong>Map</strong>: <code>n:[y1 y2 &#8230;&#8203;] &#8594; n:[n:y1 n:y2&#8230;&#8203;]</code>.<br>
<strong>Note</strong>: Useful with <a href="#p.flatten"><code>flatten</code></a> to flatten a list but preserve the names of the parent lists: <code>(flatten (pushName v))</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.cat"><code>(cat &#8230;&#8203;)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: All arguments are treated as list values, i.e., <code>:</code> is treated as <code>[]</code> and a non-list <code>v</code> is treated as <code>[v]</code>.<br>
<strong>Result</strong>: The concatenation of all arguments.  As the result can only be appended to, these are added as possible.  I.e., <code>cat</code> adds all the values of the first argument as they become available and only moves to the second argument once the first argument is finished, and so on.  If provided no arguments, the result will be <code>:</code>.<br>
<strong>Finished</strong>: All arguments are finished.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Note</strong></dt>
<dd>
<p><code>cat</code> has, by a significant margin, the most complicated implementation.<br>
In the future, a function that behaves like <code>cat</code> but does not preserve order and processes all arguments simultaneously will be added.</p>
</dd>
<dt class="hdlist1"><strong>Transformations</strong></dt>
<dd>
<p><code>(cat) &#8594; []</code><br>
<code>(cat &#8230;&#8203; : &#8230;&#8203;) &#8594; (cat &#8230;&#8203; &#8230;&#8203;)</code><br>
<code>(cat &#8230;&#8203; [] &#8230;&#8203;) &#8594; (cat &#8230;&#8203; &#8230;&#8203;)</code><br>
<code>(cat v) &#8594; v</code> if <code>v</code> is a list literal.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="p.list"><code>(list &#8230;&#8203;)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: <code>[&#8230;&#8203;]</code>, i.e., a list of the values of the arguments.  Elements will be added as arguments finish, i.e., the first element will be added when the first argument is finished, and then <code>list</code> will consider the second argument.<br>
<strong>Finished</strong>: All arguments are finished.<br>
<strong>Warning</strong>: If no arguments are given, the result is <code>[]</code>, not <code>:</code>.<br></p>
</div>
</div>
<div class="sect3">
<h4 id="p.first"><code>(first v)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Selector.<br>
<strong>Selector</strong>: First element.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.rest"><code>(rest v)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Filter<br>
<strong>Filter</strong>: Not first element.<br>
<strong>Finished</strong>: <code>v</code> is finished.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.nth"><code>(nth n v)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Selector.<br>
<strong>Arguments</strong>: <code>n</code> must be a number.<br>
<strong>Selector</strong>: +n+th element.<br>
<strong>Notes</strong>: The first element is 1, not 0.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.flatten"><code>(flatten v)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: If <code>v</code> is <code>[a1 a2 &#8230;&#8203;]</code>, then this behaves as <code>(cat a1 a2 &#8230;&#8203;)</code> would.  Otherwise, the value is <code>v</code>.<br>
<strong>Finished</strong>: <code>v</code> is finished.<br>
<strong>Note</strong>: Sublists of <code>v</code> are immutable, only <code>v</code> is allowed to append.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.focus"><code>(focus n v)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: <code>n</code> must be a string.<br>
<strong>Result</strong>: <code>focus</code> acts like a filter and a map.  First, it filters <code>v</code> by selecting only elements that are lists containing elements named <code>n</code>.  Then it maps by replacing such a list with the element named <code>n</code> renamed to have the same name as the replaced list.  If <code>v</code> is not a list, then the result is <code>[]</code>.<br>
<strong>Finished</strong>: <code>n</code> is finished and <code>v</code> is finished.<br>
<strong>Note</strong>: <code>focus</code> is best viewed as selecting subresults.  For example, say you apply a regular expression to a list of inputs, resulting a list of capture collections named after the inputs.  You now want to select a specific capture from each capture collection will preserving the names of the input.  <code>focus</code> will do exactly that.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Transformations</strong></dt>
<dd>
<p><code>(focus n v) &#8594; []</code> if <code>v</code> is a non-list literal.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_string">String</h3>
<div class="sect3">
<h4 id="p.stringReplaceRx"><code>(stringReplaceRx e r v)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Map.<br>
<strong>Arguments</strong>: <code>e</code> and <code>r</code> must be literal strings.  <code>e</code> must be a valid regular expression and <code>r</code> a valid replacement string (according to <code>boost::regex</code>).  <code>v</code> must be a string or list of strings.<br>
<strong>Map</strong>: <code>x &#8594; y</code> where <code>y</code> has every substring of <code>x</code> matching <code>e</code> replaced with <code>r</code>.<br>
<strong>Deprecated</strong>: This function will eventually be removed once an IronBee transformation doing an equivalent task is available.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.length"><code>(length v)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Map.<br>
<strong>Map</strong>: +x &#8594; length of x* if <strong>x</strong> is a string and null otherwise.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="s.filters">Filters</h3>
<div class="sect3">
<h4 id="p.eq"><code>(eq x v)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Filter.<br>
<strong>Filter</strong>: Subvalue is equal to <code>x</code> in type and value.<br>
<strong>Note</strong>: Unlikely to work as desired with float values.  A <code>near</code> function may be added in the future.<br>
<strong>Note</strong>: Lists are never equal, i.e., <code>(eq [1 2 3] [[1 2 3]])</code> is <code>[]</code>, not <code>[[1 2 3]]</code>.  This may be changed in the future.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.ne"><code>(ne x v)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Filter.<br>
<strong>Filter</strong>: Subvalue is equal to <code>x</code> in type and value.<br>
<strong>Note</strong>: See <a href="#p.eq"><code>eq</code></a> for related discussion.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.lt"><code>(lt n v)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: <code>n</code> must be a number of float.<br>
<strong>Filter</strong>: Number or float and less than <code>n</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.le"><code>(le n v)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: <code>n</code> must be a number of float.<br>
<strong>Filter</strong>: Number or float and less than or equal to <code>n</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.gt"><code>(gt n v)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: <code>n</code> must be a number of float.<br>
<strong>Filter</strong>: Number or float and greater than <code>n</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.ge"><code>(ge n v)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: <code>n</code> must be a number of float.<br>
<strong>Filter</strong>: Number or float and greater than or equal to <code>n</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.typed"><code>(typed t v)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: <code>t</code> must be a string literal and: <code>'number'</code>, <code>'float'</code>, <code>'list'</code>, or <code>'string'</code>.<br>
<strong>Filter</strong>: Type as described by <code>t</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.named"><code>(named n v)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: <code>n</code> must be a string.<br>
<strong>Filter</strong>: Has name <code>n</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.namedi"><code>(namedi n v)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: <code>n</code> must be a string.<br>
<strong>Filter</strong>: Has name <code>n</code>, possibly with case differences.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.sub"><code>(sub n v)</code></h4>
<div class="paragraph">
<p>Sub is an alias for <a href="#p.namedi"><code>namedi</code></a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.namedRx"><code>(namedRx n v)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: <code>n</code> must be a string literal and a valid regexp.<br>
<strong>Filter</strong>: Has name matching <code>n</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.longer"><code>(longer n v)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Filter.<br>
<strong>Arguments</strong>: <code>n</code> must be a number.<br>
<strong>Filter</strong>: Subvalue is list of more than <code>n</code> elements.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Transformations</strong></dt>
<dd>
<p><code>(longer n v) &#8594; v</code> if <code>n</code> is 0.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="p.flowcontrol">Flow Control</h3>
<div class="paragraph">
<p>Flow control expressions are primarily concerned with how they execute their children.</p>
</div>
<div class="sect3">
<h4 id="p.finishall"><code>(finishAll child_1 &#8230;&#8203; child_n)</code></h4>
<div class="paragraph">
<p>On the first evalution, each child will be evaluated from left-to-right. If a child
finishes, then the finished value is added to the result list for this node and
next child is evaluated. If a child is not finished, then it is recorded as the node to
resume evaluation at in the next iteration. Evaluation continues, attempting to evaluate
and finish as many children as possible.</p>
</div>
<div class="paragraph">
<p>On subsequent evaluations, the first node that did not finish in the previous evaluation
is the first node evaluated, with evaluation proceeding from left-to-right as before. Nodes
that previously evaluated as finished are not re-evaluated and their values are not re-added to
the result list.</p>
</div>
<div class="paragraph">
<p>If all child nodes evaluate to finished, the this node is finished.</p>
</div>
<div class="paragraph">
<p><strong>Arguments</strong>: Any number of children.<br>
<strong>Result</strong>: A list of all values of the children. The order is not guaranteed. This
          node will only finish if all children are also finished.<br>
<strong>Finished</strong>: All child nodes are finished.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.finishany"><code>(finishAny child_1 &#8230;&#8203; child_n)</code></h4>
<div class="paragraph">
<p>On each evaluation the children are evaluated from left-to-right until one of them
finishes. When a node finishes evaluation stops and the result of this node is the
finsihed value of the finished child node. Nodes that have not yet been evaluated
are, thus, never evaluted through this node.</p>
</div>
<div class="paragraph">
<p><strong>Arguments</strong>: Any number of children.<br>
<strong>Result</strong>: The value of the first finished child node.<br>
<strong>Finished</strong>: Immediately after the first of any child nodes is finished.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="s.predicates">Predicates</h3>
<div class="paragraph">
<p>Predicates test their primary arguments are return true or false best on the result.</p>
</div>
<div class="sect3">
<h4 id="p.isLonger"><code>(isLonger n v)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: <code>n</code> must be a number.<br>
<strong>Result</strong>: false until <code>n</code> is finished; then false until <code>v</code> is a list with more than <code>n</code> elements, then true.<br>
<strong>Finished</strong>: <code>n</code> is finished and either is true or <code>v</code> is a non-list.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.isFinished"><code>(isFinished v)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: false until <code>v</code> is finished, then true.<br>
<strong>Finished</strong>: <code>v</code> is finished.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.isLiteral"><code>(isLiteral v)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: N/A<br>
<strong>Finished</strong>: N/A</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Transformations</strong></dt>
<dd>
<p><code>(isLiteral v) &#8594; ''</code> if <code>v</code> is a literal.<br>
<code>(isLiteral v) &#8594; :</code> if <code>v</code> is not a literal.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="p.isList"><code>(isList v)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: false while <code>v</code> is <code>:</code>, then true if <code>v</code> is a list and false otherwise.<br>
<strong>Finished</strong>: <code>v</code> is finished.<br>
<strong>Note</strong>: <code>isList</code> is one way to distinguish between the falsy values <code>:</code> and <code>[]</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.label"><code>(label myLable node_1, node_2, &#8230;&#8203; node_n)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: The value of node_1 if only one node is given. Otherwise a list of all values from all nodes.
<strong>Finished</strong>: If all children are finished.
<strong>Note</strong>: <code>Label</code> must be a literal.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.call"><code>(call label)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: The same as evaluating <code>(label x)</code>. That is, if only a label and a node are given, then the value
of node. Otherwise a list of all the values of node 1, node 2, &#8230;&#8203; , through node n.
<strong>Finished:</strong> When the referenced nodes are all finished.
<strong>Note:</strong> This is how you may call a labeled node <code>(label l node)</code>. This can cause evaluation loops in the
graph and must be used with care.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.tag"><code>(tag myTag node_1, node_2, &#8230;&#8203; node_n)</code></h4>
<div class="paragraph">
<p><strong>Result:</strong> A list of all node values.
<strong>Finished:</strong> If all nodes are finished.
<strong>Note:</strong> This has the side effect of registering each node (not the tag node) as a member node of the tag list.
Nodes can be called using <code>(callTagged tag)</code>. This can cause evaluation loops in the
graph and must be used with care.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.callTagged"><code>(callTagged tag)</code></h4>
<div class="paragraph">
<p><strong>Result:</strong> A list of all node values that are tagged with <code>tag</code>.
<strong>Finished:</strong> When all nodes tagged with <code>tag</code> are finished.
<strong>Note:</strong> This can cause evaluation loops in the graph and must be used with care. <code>Tag</code> must be a literal.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_math">Math</h3>
<div class="sect3">
<h4 id="p.add"><code>(add a b)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Map.<br>
<strong>Arguments</strong>: <code>a</code> must be a float or number.<br>
<strong>Map</strong>: <code>n:x &#8594; n:(a+x)</code> if <code>x</code> is numeric and <code>x</code> otherwise.<br>
<strong>Note</strong>: Result will be float if either side is a float.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.neg"><code>(neg a)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Map.<br>
<strong>Map</strong>: <code>n:x &#8594; n:(-x)* if +x</code> is numeric and <code>x</code> otherwise.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.mult"><code>(mult a b)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Map.<br>
<strong>Arguments</strong>: <code>a</code> must be a float or number.<br>
<strong>Map</strong>: <code>n:x &#8594; n:(a*x)</code> if <code>x</code> is numeric and <code>x</code> otherwise.<br>
<strong>Note</strong>: Result will be float if either side is a float.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.recip"><code>(recip a)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Map.<br>
<strong>Map</strong>: <code>n:x &#8594; n:(1/x)* if +x</code> is numeric and <code>x</code> otherwise.<br>
<strong>Note</strong>: Result is always a float.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.max"><code>(max v)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: <code>v</code> must be a list.<br>
<strong>Result</strong>: <code>:</code> until <code>v</code> is finished, then largest numeric element of <code>v</code> or <code>:</code> if no such element.<br>
<strong>Finished</strong>: <code>v</code> is finished.<br>
<strong>Note</strong>: On ties, the first maximum element will be the result.<br>
<strong>Note</strong>: To compare results from two functions, use <a href="#p.cat"><code>cat</code></a>, e.g., <code>(max (cat (ref 'a') (ref 'b')))</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.min"><code>(min v)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: <code>v</code> must be a list.<br>
<strong>Result</strong>: <code>:</code> until <code>v</code> is finished, then smallest numeric element of <code>v</code> or <code>:</code> if no such element.<br>
<strong>Finished</strong>: <code>v</code> is finished.<br>
<strong>Note</strong>: On ties, the first minimum element will be the result.<br>
<strong>Note</strong>: To compare results from two functions, use <a href="#p.cat"><code>cat</code></a>, e.g., <code>(min (cat (ref 'a') (ref 'b')))</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_phase">Phase</h3>
<div class="paragraph">
<p>These are specialized functions used to closely control when evaluation occurs.</p>
</div>
<div class="paragraph">
<p>A phase is specified via a literal strings describing an IronBee phase.  Valid values are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>REQUEST_HEADER</code></p>
</li>
<li>
<p><code>REQUEST_HEADER_PROCESS</code></p>
</li>
<li>
<p><code>REQUEST</code></p>
</li>
<li>
<p><code>REQUEST_PROCESS</code></p>
</li>
<li>
<p><code>RESPONSE_HEADER</code></p>
</li>
<li>
<p><code>RESPONSE_HEADER_PROCESS</code></p>
</li>
<li>
<p><code>RESPONSE</code></p>
</li>
<li>
<p><code>RESPONSE_PROCESS</code></p>
</li>
<li>
<p><code>POSTPROCESS</code></p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
These functions never transform into literals.  Only use them on arguments that are known to be dynamic, e.g., expressions involving IronBee functions.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="p.waitPhase"><code>(waitPhase p v)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: <code>:</code> until evaluated in phase <code>p</code> and <code>v</code> from then on.<br>
<strong>Finished</strong>: Phase is <code>p</code> or later and <code>v</code> is finished.<br>
<strong>Note</strong>: It is possible that <code>v</code> will be evaluated before phase <code>p</code> if it appears in another expression.<br></p>
</div>
</div>
<div class="sect3">
<h4 id="p.finishPhase"><code>(finishPhase p v)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: <code>v</code> until phase <code>p</code> and the value of <code>v</code> at phase <code>p</code> from then on.<br>
<strong>Finished</strong>: <code>v</code> is finished or phase is <code>p</code> or later.<br>
<strong>Note</strong>: This function makes a copy of the value of <code>v</code> at phase <code>p</code>.  This copy can be a significant performance cost for complicated values.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="s.ironbee">IronBee</h3>
<div class="paragraph">
<p>These functions allow interaction with IronBee.  In particular, they allow the use of IronBee rule components (transformations, operations, and vars).  They are the primary means by which external data enters Predicate.</p>
</div>
<div class="sect3">
<h4 id="p.var"><code>(var n)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: <code>:</code> if no var named <code>n</code>; value of var <code>n</code> otherwise.<br>
<strong>Finished</strong>: For non-list values, as soon as they have a value.  For list values, when the var reaches its final phase.<br>
<strong>Note</strong>: <code>var</code> never transforms.<br>
<strong>Warning</strong>: Vars are not required to have a final phase.  As such, this function may never be finished. <br>
<strong>Warning</strong>: Vars may not obey value semantics; in particular, they may change value.  The behavior of the var function with such vars is undefined.<br></p>
</div>
</div>
<div class="sect3">
<h4 id="p.var2"><code>(var n w f)</code></h4>
<div class="paragraph">
<p>This function behaves as <a href="#p.var">var</a> except that it assumes that the var has a wait phase of <code>w</code> and a final phase of <code>f</code>.  These assumptions are not enforced.  To enforce behavior, see <a href="#p.waitPhase">waitPhase</a> and <a href="#p.finishPhase">finishPhase</a>.  This function is primarily for modules that adds vars without properly registering wait and final phases.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.ask"><code>(ask p v)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: <code>:</code> if <code>v</code> is not a list.  Otherwise, value of asking collection <code>v</code> with parameter <code>p</code>.<br>
<strong>Finished</strong>: <code>v</code> is finished.<br>
<strong>Note</strong>: <code>v</code> never transforms.<br>
<strong>Note</strong>: This function is only useful for asking dynamic collections for values.  Such collections are provided by modules.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.operator"><code>(operator n s v)</code> <code>(foperator n s v)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Map for <code>operator</code>; Filter for <code>foperator</code>.<br>
<strong>Arguments</strong>: <code>n</code> and <code>s</code> must be literals.<br>
<strong>Map</strong>: Apply operator named <code>n</code> with parameter <code>s</code> to each subvalue and take value of capture if true and <code>:</code> if false.<br>
<strong>Filter</strong>: Apply operator named <code>n</code> with parameter <code>s</code> and test if operator returns true.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.transformation"><code>(transformation n s v)</code></h4>
<div class="paragraph">
<p><strong>Category</strong>: Map.<br>
<strong>Arguments</strong>: <code>n</code> and <code>s</code> must be literals.<br>
<strong>Map</strong>: Apply transformation named <code>n</code> with parameter <code>s</code> to each subvalue.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.constant"><code>(constant k)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: <code>k</code> must be a string literal.<br>
<strong>Result</strong>: Value of constant with key <code>k</code> or <code>:</code> if no such constant.<br>
<strong>Finished</strong>: Always.<br>
<strong>Note</strong>: Always transforms.<br>
<strong>Note</strong>: To make <code>constant</code> available, load <code>ibmod_predicate_constant</code> module after loading both <code>ibmod_predicate</code> and <code>ibmod_constant</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.genevent"><code>(genEvent rule_id rule_version event_type event_action confidence severity message tags)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>:<br></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>rule_id</code> must be a string literal. This and <code>rule_version</code> are the only values
that must be literals.</p>
</li>
<li>
<p><code>rule_version</code> must be natural number of a string that is convertable to one.</p>
</li>
<li>
<p><code>event_type</code> is "observation" or "alert".</p>
</li>
<li>
<p><code>event_action</code> is "log", "block", "ignore" or "allow."</p>
</li>
<li>
<p><code>confidence</code> is an integer from 0 to 100, inclusive. It may be a convertable string.</p>
</li>
<li>
<p><code>severity</code> is an integer from 0 to 100, inclusive. It may be a convertable string.</p>
</li>
<li>
<p><code>message</code> is a string describing the event.</p>
</li>
<li>
<p><code>tags</code> is a list of strings that are tags applied to the event. If this list is null, then
no event is generated. This may also be a single string which is treated as a single tag.<br></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Result</strong>: When all children are finished and the <code>tags</code> child has a value, an
  IronBee event is generated and this node is finished true.<br>
<strong>Finished</strong>: When all children are finished and true. In this sent this node acts like an <em>and</em>
  with a sideffect of generating an IronBee event.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="s.development">Development</h3>
<div class="paragraph">
<p>These functions assist with testing Predicate or developing Predicate expressions.  They are not intend for use in production.</p>
</div>
<div class="sect3">
<h4 id="p.p"><code>(p &#8230;&#8203;)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: Must have at least one child.<br>
<strong>Result</strong>: Value of last argument.<br>
<strong>Finished</strong>: Last argument is finished.<br>
<strong>Note</strong>: Will output the value of each argument to stderr at every evaluation.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.sequence"><code>(sequence s e d)</code> <code>(sequence s e)</code></h4>
<div class="paragraph">
<p><strong>Arguments</strong>: If <code>d</code> is omitted, it is treated as <code>1</code>.<br>
<strong>Result</strong>: <code>[s s+d s+2d &#8230;&#8203; e]</code>.<br>
<strong>Finished</strong>: When the entire range is produced.<br>
<strong>Note</strong>: Appends a single value at each evaluation.<br>
<strong>Note</strong>: <code>d</code> can be negative.<br>
<strong>Note</strong>: Infinite ranges are possible, e.g., by having <code>d</code> positive and <code>s &gt; e</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="p.identity"><code>(identity v)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: <code>v</code><br>
<strong>Finished</strong>: When <code>v</code> is.<br>
<strong>Note</strong>: This function never transforms.  In contrast, <code>(cat v)</code> is semantically equivalent, but does transform.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="s.templates">Templates</h3>
<div class="paragraph">
<p>Templates provide basic user defined substitution transformations.  They permit complex expressions to be expressed as simple expressions, allowing for improved error messages and fewer bytes in certain forms.  Ultimately, they expand out to full expressions tree, have subexpressions merged with all other expressions, and are treated no differently that had they been written out fully to begin with.</p>
</div>
<div class="paragraph">
<p>Templates are defined as a name, a list of parameters, and an expression.  The result is a new function named name.  When called, that function binds its arguments to the list of parameters and transforms based on the expression.  The expression can refer to the parameters via the <a href="#p.ref"><code>ref</code></a> function.</p>
</div>
<div class="sect3">
<h4 id="p.ref"><code>(ref s)</code></h4>
<div class="paragraph">
<p><strong>Result</strong>: N/A<br>
<strong>Finished</strong>: N/A<br>
<strong>Transformations:</strong>: Transforms into argument to parameter named <code>s</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_index">Index</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="#p.add"><code>add</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.and"><code>and</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.ask"><code>ask</code></a> (<a href="#s.ironbee">Ironbee</a>)<br>
<a href="#p.call"><code>call</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.callTagged"><code>callTagged</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.cat"><code>cat</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.constant"><code>constant</code></a> (<a href="#s.ironbee">Ironbee</a>)<br>
<a href="#p.eq"><code>eq</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.false"><code>false</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.finishPhase"><code>finishPhase</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.finishall"><code>finishall</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.finishany"><code>finishany</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.first"><code>first</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.flatten"><code>flatten</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.flowcontrol"><code>flowcontrol</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.focus"><code>focus</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.ge"><code>ge</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.genevent"><code>genevent</code></a> (<a href="#s.ironbee">Ironbee</a>)<br>
<a href="#p.gt"><code>gt</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.identity"><code>identity</code></a> (<a href="#s.development">Development</a>)<br>
<a href="#p.if"><code>if</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.isFinished"><code>isFinished</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.isList"><code>isList</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.isLiteral"><code>isLiteral</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.isLonger"><code>isLonger</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.label"><code>label</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.le"><code>le</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.length"><code>length</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.list"><code>list</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.longer"><code>longer</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.lt"><code>lt</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.max"><code>max</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.min"><code>min</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.mult"><code>mult</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.named"><code>named</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.namedRx"><code>namedRx</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.namedi"><code>namedi</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.ne"><code>ne</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.neg"><code>neg</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.not"><code>not</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.nth"><code>nth</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.operator"><code>operator</code></a> (<a href="#s.ironbee">Ironbee</a>)<br>
<a href="#p.or"><code>or</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.p"><code>p</code></a> (<a href="#s.development">Development</a>)<br>
<a href="#p.pushName"><code>pushName</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.recip"><code>recip</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.ref"><code>ref</code></a> (<a href="#s.templates">Templates</a>)<br>
<a href="#p.rest"><code>rest</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.sequence"><code>sequence</code></a> (<a href="#s.development">Development</a>)<br>
<a href="#p.setName"><code>setName</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.stringReplaceRx"><code>stringReplaceRx</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.sub"><code>sub</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.tag"><code>tag</code></a> (<a href="#s.predicates">Predicates</a>)<br>
<a href="#p.transformation"><code>transformation</code></a> (<a href="#s.ironbee">Ironbee</a>)<br>
<a href="#p.true"><code>true</code></a> (<a href="#s.boolean">Boolean</a>)<br>
<a href="#p.typed"><code>typed</code></a> (<a href="#s.filters">Filters</a>)<br>
<a href="#p.var"><code>var</code></a> (<a href="#s.ironbee">Ironbee</a>)<br>
<a href="#p.var2"><code>var2</code></a> (<a href="#s.ironbee">Ironbee</a>)<br>
<a href="#p.waitPhase"><code>waitPhase</code></a> (<a href="#s.predicates">Predicates</a>)<br></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-09-08 11:23:22 CDT
</div>
</div>
</body>
</html>